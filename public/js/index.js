!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const o=(e,t,n,o)=>{if([...e.classList].includes(t))e.classList.remove(t),e.classList.add(n);else{e.classList.remove(n),e.classList.add(o);const r=function(n){n.pseudoElement?e.addEventListener("animationend",r,{capture:!1,once:!0,passive:!1}):(e.classList.remove(o),e.classList.add(t))};e.addEventListener("animationend",r,{capture:!1,once:!0,passive:!1})}};function r(e,t){const n={lat:t,lng:e},o=new google.maps.Map(document.getElementById("map"),{zoom:12,center:n});new google.maps.Marker({position:n,map:o})}const a=e=>e/111,s=(e,t,n,o)=>{o.target.value===n?(e.classList.remove("hidden"),t.classList.add("hidden")):(e.classList.add("hidden"),t.classList.remove("hidden"))},c=async(e,t)=>{let n,o;if(e.checked){const e=t.address.value;try{const t=await(async e=>{const t=encodeURI(e),n=await fetch(`https://maps.googleapis.com/maps/api/geocode/json?address=${t},+Mountain+View,+CA&key=AIzaSyAp5UYVzziKLVf2tgQk5dyaIH0nXDCQAao`),o=await n.json();console.log(o);const r=o.results[0].geometry.location;if(!r)throw new Error("Getting the coords from google geocoding API failed");return r})(e);n=t.lng,o=t.lat}catch(e){throw new Error(e)}}else n=+t["coord-long"].value,o=+t["coord-lat"].value;return[n,o]},d=(e,t)=>{if("radio"===e.type)return;let n;if(e===t.address)n=e.value.trim();else{n=/^[0-9]+(\.[0-9])*$/.test(e.value)}return n?e.classList.remove("invalid"):e.classList.add("invalid"),n},l=e=>{const t=document.getElementById("error");t.textContent=e,t.style.display="block"};try{const e=document.querySelector("form");if(e){const t=e.elements,n=document.getElementById("locationselect-adr");n.checked=!0;const o=document.getElementById("rangeselect-circle");o.checked=!0;document.getElementById("refresh").addEventListener("click",async()=>{const t=e.elements;let o;try{o=await c(n,t)}catch(e){return void l("Nepodařilo se získat souřadnice. Zkuste to znovu později.")}try{r(...o)}catch{l("Nepodařilo se získat mapu. Zkuste to znovu později.")}});const i=document.getElementById("locationselect-adr").parentElement.parentElement,u=document.getElementById("address").closest(".form__set"),m=document.getElementById("coord-lat").closest(".form__set");i.addEventListener("input",e=>{s(u,m,"adr",e)});const p=document.getElementById("rangeselect-circle").parentElement.parentElement,f=document.getElementById("annulus-perimeter-outer").closest(".form__set"),v=document.getElementById("circle-perimeter").closest(".form__set");p.addEventListener("input",e=>{s(f,v,"annulus",e)}),e.addEventListener("submit",async e=>{e.preventDefault();if(((e,t,n)=>{let o=[];e.checked?o.push(n.address):(o.push(n["coord-long"]),o.push(n["coord-lat"])),t.checked?o.push(n["circle-perimeter"]):(o.push(n["annulus-perimeter-outer"]),o.push(n["annulus-perimeter-inner"]));let r=!0;for(const e of o){d(e,n)||(r=!1)}return r})(n,o,t)){let e;try{e=await c(n,t)}catch(e){return void l("Nepodařilo se získat souřadnice. Zkuste to znovu později.")}const[r,s]=((e,t,n)=>{const[o,r]=n;let s,c;const d=2*Math.random()*Math.PI;e.checked?(s=+t["circle-perimeter"].value,c=s*Math.random()):(s=+t["annulus-perimeter-outer"].value-+t["annulus-perimeter-inner"].value,c=+t["annulus-perimeter-inner"].value+s*Math.random());const l=Math.sin(d)*c,i=Math.cos(d)*c,u=a(l);return[o+a(i),r+u]})(o,t,e),d=new URL(`/randomvylet/found.html?lng=${r}&lat=${s}`,document.location.href);document.location.href=d}else n.checked?l("Alespoň jeden input je neplatný. Zkontrolujte, prosím, zda jste zadali adresu a zda jsou všechna čísla zadaná bez jednotek a případné desetinné řády jsou oddělené tečkou."):l("Alespoň jeden input je neplatný. Zkontrolujte, prosím, zda jsou všechna čísla zadaná bez jednotek a případné desetinné řády jsou oddělené tečkou")});for(const n of e.elements)n.addEventListener("input",()=>{d(n,t)})}if(document.querySelector(".found")){const e=new URLSearchParams(window.location.search),t=+e.get("lat"),n=+e.get("lng"),o=document.querySelector(".found__coord-lat"),a=document.querySelector(".found__coord-long");o.textContent=t,a.textContent=n;try{r(n,t)}catch(e){l("Nepodařilo se získat mapu. Zkuste to znovu později.")}document.getElementById("btn-next-trip").addEventListener("click",()=>{const e=new URL("/",document.location.href);document.location.href=e})}const t=document.getElementById("info"),n=document.getElementById("show-info");n.addEventListener("click",()=>{o(t,"info--hidden","info--visible","info--hiding"),o(n,"header__btn--not-clicked","header__btn--clicked","header__btn--hiding")})}catch(e){l("Váš prohlížeč zřejmě nepodporuje všechny prvky, které při kódování této aplikace používám. Z toho důvodu je možné, že aplikace nebude fungovat tak, jak by měla.")}"serviceWorker"in navigator&&navigator.serviceWorker.register("../sw.js")}]);